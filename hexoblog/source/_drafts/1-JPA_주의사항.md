---
title: 1-JPA_주의사항
tags:
  - JPA
categories:
  - JPA
date: 2021-09-06 00:12:31
---

setter사용 지양
변경 포인트를 찾기가 힘들다. 생성자와 메서드로 주입하자.

연관관계 지연로딩
OneToMany의 경우에는 기본이 lazy다.
ToOne의 경우들은 eager기 때문에 lazy로 바꿔준다.
이유: eager의 경우 하나 sql실행시 그에 딸린 내부에 eager설정들이 
모두 연쇄되어 켜지기때문에 관련없는 정보가 같이 온다.
필요한정보는 fetch join이나 dto등을 통해서 가져오는 방법이있다.

컬렉션은 필드에서 초기화
엔티티가 영속성컨텍스트안에서 persist가 되면 jpa의 특정 클래스 이름으로 변경된다.
따라서 이부분에서 컬렉션을 수정하게된다면 문제가 발생할수있기때문에
persist후 값변경을 방지하기위해서 특정메서드에서 초기화하는것을 방지해야한다.


